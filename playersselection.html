<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>SuperHero Fight</title>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <style>
        html {
            height: 100%;
        }

        body,
        .container {
            width: 100%;
            height: 100%;
            min-width: 100%;
            min-height: 100%;
            margin: 0 auto;
            display: flex;
            z-index: 2;
        }

        .characters-list {
            text-align: center;
            height: 60%;
        }

        .avatar-bg {
            position: fixed;
            height: 100%;
            width: 100%;
            background-image: url(https://cdn.rawgit.com/akabab/superhero-api/0.2.0/api/images/sm/1-a-bomb.jpg);
            background-repeat: no-repeat;
            background-size: cover;
            filter: blur(3px) brightness(0.5);
        }

        .avatar {
            background-color: blueviolet;
            width: 25vw;
            height: 25vw;
            display: inline-flex;
            background-size: cover;
        }

        .selected{
            filter: brightness(1.5);
        }
    </style>
</head>

<body>
    <div class="avatar-bg"></div>
    <div class="container">
        <div class="characters-list">
            <div id="avatar0" class="avatar" onclick="selectCharacter(0)"></div>
            <div id="avatar1" class="avatar"  onclick="selectCharacter(1)"></div>
            <div id="avatar2" class="avatar"  onclick="selectCharacter(2)"></div>

            <div id="avatar3" class="avatar"  onclick="selectCharacter(3)"></div>
            <div id="avatar4" class="avatar"  onclick="selectCharacter(4)"></div>
            <div id="avatar5" class="avatar"  onclick="selectCharacter(5)"></div>

            <div id="avatar6" class="avatar"  onclick="selectCharacter(6)"></div>
            <div id="avatar7" class="avatar"  onclick="selectCharacter(7)"></div>
            <div id="avatar8" class="avatar"  onclick="selectCharacter(8)"></div>


        </div>
    </div>
</body>
<script>
    var superapi = "https://akabab.github.io/superhero-api/api";
    var superapicached = "https://cdn.rawgit.com/akabab/superhero-api/0.2.0/api";

    var charactersIdxList = [1, 2, 3, 4, 5, 6, 7, 8, 10];
    var charactersList = [];
    var selectedCharacter = null;

    //init des characters
    charactersIdxList.forEach(function (charId, i) {
        $.get(superapi + "/id/" + charId + ".json", function (character) {
            if (!character) return;
            charactersList.push(character);
            // console.log("data", character.images.xs);
            // $(".result").html(JSON.stringify(data));
            if (i == 0) 
                selectCharacter(i);
            
            $("#avatar" + i).css("background-image", "url(" + character.images.sm + ")");
        });

    })


    var selectCharacter = function (i) {
        selectedCharacter = charactersList[i];
        $(".avatar").removeClass("selected");
        $("#avatar"+i).addClass("selected");
        $(".avatar-bg").css("background-image", "url(" + selectedCharacter.images.sm + ")");
    }

</script>

</html>